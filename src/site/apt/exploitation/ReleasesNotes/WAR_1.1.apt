 ----- SIRH JOBS ----- Nicolas RAYNAUD ----- 07/03/2013  Modifications liées au passage du WAR en 1.1* Ce WAR comprend :  * {{{http://dvlp:8181/browse/SIRHJOBS-6}SIRHJOBS-6}} : Job d'impression des avancements * {{{http://dvlp:8181/browse/SIRHJOBS-7}SIRHJOBS-7}} : Modifier la dépendance à CUPS4J * {{{http://dvlp:8181/browse/SIRHJOBS-8}SIRHJOBS-8}} : Ajouter l'envoi de mail automatique au demandeur de l'impression lorsqu'une erreur s'est produite 	[] * Mise en recette :    [[1]] <<Ajouter>> au contexte les paramètres suivants (cf {{{../context.html}context}}): 		<<REPORTING_SERVER_SIRH_REPORT_PATH>> : défini le path vers les reports SIRH				<<REPORTING_BASE_URL>> : défini l'url root du serveur de reporting BIRT				<<AVCT_JOB_TEMP_DIR>> : le répertoire temporaire (local) de travail du job de gestion des impressions. Ce répertoire va servir à stocker les différents documents téléchargés par le job avant de les envoyer au serveur d'impression. Besoins de droits en lecture et écriture.				<<AVCT_SIRH_WS_AVCT_EAE_URL>> : URL vers le web service SIRH-WS qui retourne les ids d'EAEs à imprimer				<<AVCT_CUPS_SERVER_HOSTNAME>> : Hostname du serveur d'impression CUPS (pour le moment hébergé sur le seduntu d'Adrien (cf. IP dans le fichier de contexte)				<<AVCT_CUPS_SERVER_PORT>> : Port du serveur d'impression CUPS (pour le moment hébergé sur le seduntu d'Adrien (cf. Port dans le fichier de contexte)				<<AVCT_CUPS_SIRH_PRINTER_NAME>> : Nom de l'imprimante cible pour le pool d'impression des documents liés aux avancements (URL au format CUPS réutilisant le hostname et port du serveur CUPS)				<<AVCT_URL_SHAREPOINT_GED>> : URL vers le web service sharepoint retournant un path webdav d'accès aux documents EAEs				<<AVCT_GED_WEBDAV_USER>> : User ***REMOVED*** ayant accès aux documents SIRH hébergés sur sharepoint				<<AVCT_GED_WEBDAV_PWD>> : Password du user ci-dessus				<<AVCT_SIRH_PAST_DOCS_THRESHOLD_MS>> : temps en millisecondes après lequel les documents du répertoire de travail du job seront automatiquement effacés. (par défaut à 21600000 = 6 heures) [[2]] <<Executer>> le script d'insertion du nouveau job en base de données en tant que QRTZ_USR: {{{../../doc/scripts/1.0-1.QRTZ_USR.insert.sql}1.0-1.QRTZ_USR.insert.sql}}  [[3]] <<Déployer>> le war {{{../../war/sirh-jobs%23%2320130307-0905-1.1.war}sirh-jobs##20130307-0905-1.1.war}}  [[4]] Vérifier que la page version de l'application fonctionne: {{http://jobs-qual.sirh.site-mairie.noumea.nc/version.jsp}} : la <<version>> doit être <<1.1>>